# Skills åŠ è½½æœºåˆ¶è¯¦è§£

æœ¬æ–‡æ¡£ä»¥æ•™å­¦çº§åˆ«çš„æ–¹å¼è¯¦ç»†è§£é‡Š Codex é¡¹ç›®ä¸­ Skillsï¼ˆæŠ€èƒ½ï¼‰çš„åŠ è½½æœºåˆ¶ã€‚

> **æ³¨æ„**ï¼šSkills åŠŸèƒ½ç›®å‰å¤„äºå®éªŒé˜¶æ®µï¼Œå¯èƒ½ä¼šæœ‰å˜åŒ–ã€‚

## 1. æ¦‚è¿°

Codex çš„ Skills åŠ è½½æœºåˆ¶**ä¸æ˜¯çœŸæ­£çš„çƒ­åŠ è½½ï¼ˆHot Loadingï¼‰**ï¼Œè€Œæ˜¯**å†·åŠ è½½ï¼ˆCold Loadingï¼‰**æœºåˆ¶ã€‚Skills åªåœ¨ä»¥ä¸‹æ—¶æœºåŠ è½½ï¼š

1. **åº”ç”¨å¯åŠ¨æ—¶** - ä¸€æ¬¡æ€§åŠ è½½æ‰€æœ‰ Skills
2. **é‡å¯åº”ç”¨å** - é‡æ–°åŠ è½½æ›´æ–°çš„ Skills

ç›®å‰**ä¸æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€é‡è½½** - å¦‚æœæ‚¨ä¿®æ”¹äº† SKILL.md æ–‡ä»¶ï¼Œéœ€è¦é‡å¯ Codex æ‰èƒ½ç”Ÿæ•ˆã€‚

## 2. åŠ è½½æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Codex å¯åŠ¨æµç¨‹                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤ 1: æ£€æŸ¥ Feature Flag                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚  if config.features.enabled(Feature::Skills) {                              â”‚
â”‚      Some(load_skills(&config))  // åªæœ‰å¯ç”¨ Skills ç‰¹æ€§æ‰åŠ è½½               â”‚
â”‚  }                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤ 2: ç¡®å®š Skills æœç´¢è·¯å¾„                                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚  æœç´¢è·¯å¾„ 1: ~/.codex/skills/                                               â”‚
â”‚  æœç´¢è·¯å¾„ 2: <git-repo-root>/.codex/skills/  (å¦‚æœåœ¨ Git ä»“åº“ä¸­)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤ 3: é€’å½’æ‰«æç›®å½•                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚  ä½¿ç”¨ BFS (å¹¿åº¦ä¼˜å…ˆæœç´¢) éå†æ‰€æœ‰å­ç›®å½•                                       â”‚
â”‚  è·³è¿‡: éšè—ç›®å½•(ä»¥.å¼€å¤´), ç¬¦å·é“¾æ¥                                           â”‚
â”‚  æŸ¥æ‰¾: åä¸º "SKILL.md" çš„æ–‡ä»¶                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤ 4: è§£ææ¯ä¸ª SKILL.md æ–‡ä»¶                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚  1. è¯»å–æ–‡ä»¶å†…å®¹                                                             â”‚
â”‚  2. æå– YAML frontmatter (--- ä¹‹é—´çš„å†…å®¹)                                   â”‚
â”‚  3. è§£æ name å’Œ description å­—æ®µ                                           â”‚
â”‚  4. éªŒè¯å­—æ®µé•¿åº¦ (nameâ‰¤100å­—ç¬¦, descriptionâ‰¤500å­—ç¬¦)                        â”‚
â”‚  5. æ¸…ç†æ¢è¡Œç¬¦ï¼Œè½¬æ¢ä¸ºå•è¡Œæ–‡æœ¬                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â–¼                      â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   è§£ææˆåŠŸ        â”‚    â”‚   è§£æå¤±è´¥        â”‚
              â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚    â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
              â”‚ æ·»åŠ åˆ° skills åˆ—è¡¨â”‚    â”‚ æ·»åŠ åˆ° errors åˆ—è¡¨â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚                      â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤ 5: æ’åº Skills                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚  æŒ‰ name æ’åºï¼Œå¦‚æœ name ç›¸åŒåˆ™æŒ‰ path æ’åº                                   â”‚
â”‚  ä¿è¯åŠ è½½ç»“æœçš„ç¨³å®šæ€§å’Œå¯é¢„æµ‹æ€§                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ­¥éª¤ 6: è¿”å› SkillLoadOutcome                                               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚  {                                                                          â”‚
â”‚      skills: Vec<SkillMetadata>,  // æˆåŠŸåŠ è½½çš„æŠ€èƒ½åˆ—è¡¨                      â”‚
â”‚      errors: Vec<SkillError>      // åŠ è½½å¤±è´¥çš„é”™è¯¯åˆ—è¡¨                      â”‚
â”‚  }                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3. æ ¸å¿ƒæ•°æ®ç»“æ„

### 3.1 SkillMetadata - æŠ€èƒ½å…ƒæ•°æ®

```rust
// ä½ç½®: codex-rs/core/src/skills/model.rs
pub struct SkillMetadata {
    pub name: String,        // æŠ€èƒ½åç§° (â‰¤100å­—ç¬¦)
    pub description: String, // æŠ€èƒ½æè¿° (â‰¤500å­—ç¬¦)
    pub path: PathBuf,       // SKILL.md æ–‡ä»¶çš„ç»å¯¹è·¯å¾„
}
```

### 3.2 SkillLoadOutcome - åŠ è½½ç»“æœ

```rust
// ä½ç½®: codex-rs/core/src/skills/model.rs
pub struct SkillLoadOutcome {
    pub skills: Vec<SkillMetadata>, // æˆåŠŸåŠ è½½çš„æŠ€èƒ½
    pub errors: Vec<SkillError>,     // åŠ è½½é”™è¯¯åˆ—è¡¨
}

pub struct SkillError {
    pub path: PathBuf,   // å¤±è´¥çš„æ–‡ä»¶è·¯å¾„
    pub message: String, // é”™è¯¯ä¿¡æ¯
}
```

## 4. ä»£ç è·¯å¾„è¯¦è§£

### 4.1 å…¥å£ç‚¹ - Codex::spawn

```rust
// ä½ç½®: codex-rs/core/src/codex.rs (ç¬¬ 183-187 è¡Œ)
impl Codex {
    pub async fn spawn(...) -> CodexResult<CodexSpawnOk> {
        // ... åˆå§‹åŒ–ä»£ç  ...
        
        // ğŸ”‘ å…³é”®ç‚¹ï¼šåœ¨å¯åŠ¨æ—¶åŠ è½½ Skills
        let loaded_skills = if config.features.enabled(Feature::Skills) {
            Some(load_skills(&config))
        } else {
            None
        };
        
        // è®°å½•åŠ è½½é”™è¯¯åˆ°æ—¥å¿—
        if let Some(outcome) = &loaded_skills {
            for err in &outcome.errors {
                error!("failed to load skill {}: {}", err.path.display(), err.message);
            }
        }
        // ... ç»§ç»­åˆå§‹åŒ– ...
    }
}
```

### 4.2 åŠ è½½å™¨ - load_skills

```rust
// ä½ç½®: codex-rs/core/src/skills/loader.rs (ç¬¬ 55-67 è¡Œ)
pub fn load_skills(config: &Config) -> SkillLoadOutcome {
    let mut outcome = SkillLoadOutcome::default();
    
    // è·å–æ‰€æœ‰æœç´¢è·¯å¾„
    let roots = skill_roots(config);
    
    // éå†æ¯ä¸ªè·¯å¾„ï¼Œå‘ç° Skills
    for root in roots {
        discover_skills_under_root(&root, &mut outcome);
    }
    
    // æŒ‰ name å’Œ path æ’åºä¿è¯ç¨³å®šæ€§
    outcome.skills.sort_by(|a, b| 
        a.name.cmp(&b.name).then_with(|| a.path.cmp(&b.path))
    );
    
    outcome
}
```

### 4.3 æœç´¢è·¯å¾„ç¡®å®š - skill_roots

```rust
// ä½ç½®: codex-rs/core/src/skills/loader.rs (ç¬¬ 69-81 è¡Œ)
fn skill_roots(config: &Config) -> Vec<PathBuf> {
    let mut roots = vec![];
    
    // è·¯å¾„ 1: ~/.codex/skills/
    roots.push(config.codex_home.join("skills"));
    
    // è·¯å¾„ 2: <git-repo-root>/.codex/skills/ (å¦‚æœåœ¨ Git ä»“åº“ä¸­)
    if let Some(repo_root) = resolve_root_git_project_for_trust(&config.cwd) {
        roots.push(repo_root.join(".codex").join("skills"));
    }
    
    roots
}
```

### 4.4 ç›®å½•æ‰«æ - discover_skills_under_root

```rust
// ä½ç½®: codex-rs/core/src/skills/loader.rs (ç¬¬ 83-137 è¡Œ)
fn discover_skills_under_root(root: &Path, outcome: &mut SkillLoadOutcome) {
    // ä½¿ç”¨ BFS é˜Ÿåˆ—éå†ç›®å½•
    let mut queue: VecDeque<PathBuf> = VecDeque::from([root]);
    
    while let Some(dir) = queue.pop_front() {
        for entry in fs::read_dir(&dir).flatten() {
            let path = entry.path();
            let file_name = match path.file_name().and_then(|f| f.to_str()) {
                Some(name) => name,
                None => continue,  // è·³è¿‡æ— æ³•è·å–åç§°çš„æ¡ç›®
            };
            
            // è·³è¿‡éšè—æ–‡ä»¶/ç›®å½•
            if file_name.starts_with('.') { continue; }
            
            // è·³è¿‡ç¬¦å·é“¾æ¥
            if file_type.is_symlink() { continue; }
            
            // å¦‚æœæ˜¯ç›®å½•ï¼ŒåŠ å…¥é˜Ÿåˆ—ç»§ç»­æ‰«æ
            if file_type.is_dir() {
                queue.push_back(path);
                continue;
            }
            
            // åªå¤„ç†åä¸º "SKILL.md" çš„æ–‡ä»¶
            if file_name == "SKILL.md" {
                match parse_skill_file(&path) {
                    Ok(skill) => outcome.skills.push(skill),
                    Err(err) => outcome.errors.push(SkillError { path, message: err.to_string() }),
                }
            }
        }
    }
}
```

### 4.5 æ–‡ä»¶è§£æ - parse_skill_file

```rust
// ä½ç½®: codex-rs/core/src/skills/loader.rs (ç¬¬ 139-160 è¡Œ)
fn parse_skill_file(path: &Path) -> Result<SkillMetadata, SkillParseError> {
    // 1. è¯»å–æ–‡ä»¶å†…å®¹
    let contents = fs::read_to_string(path)?;
    
    // 2. æå– YAML frontmatter
    let frontmatter = extract_frontmatter(&contents)?;
    
    // 3. è§£æ YAML
    let parsed: SkillFrontmatter = serde_yaml::from_str(&frontmatter)?;
    
    // 4. æ¸…ç†å­—æ®µ (ç§»é™¤æ¢è¡Œç¬¦)
    let name = sanitize_single_line(&parsed.name);
    let description = sanitize_single_line(&parsed.description);
    
    // 5. éªŒè¯å­—æ®µé•¿åº¦
    validate_field(&name, 100, "name")?;
    validate_field(&description, 500, "description")?;
    
    Ok(SkillMetadata { name, description, path: path.to_path_buf() })
}
```

## 5. Skills çš„ä½¿ç”¨æµç¨‹

åŠ è½½åçš„ Skills ä¼šåœ¨ä»¥ä¸‹åœºæ™¯è¢«ä½¿ç”¨ï¼š

### 5.1 æ³¨å…¥åˆ°ç³»ç»Ÿæç¤º (System Prompt)

```rust
// ä½ç½®: codex-rs/core/src/project_doc.rs (ç¬¬ 36-74 è¡Œ)
pub async fn get_user_instructions(config: &Config, skills: Option<&[SkillMetadata]>) -> Option<String> {
    // å¦‚æœå¯ç”¨äº† Skills ç‰¹æ€§ï¼Œæ¸²æŸ“ Skills éƒ¨åˆ†
    let skills_section = if config.features.enabled(Feature::Skills) {
        skills.and_then(render_skills_section)
    } else {
        None
    };
    
    // åˆå¹¶ project docs å’Œ skills éƒ¨åˆ†
    let combined = merge_project_docs_with_skills(project_docs, skills_section);
    // ...
}
```

### 5.2 æ¸²æŸ“ Skills éƒ¨åˆ†

```rust
// ä½ç½®: codex-rs/core/src/skills/render.rs
pub fn render_skills_section(skills: &[SkillMetadata]) -> Option<String> {
    if skills.is_empty() { return None; }
    
    let mut lines = vec!["## Skills".to_string()];
    lines.push("These skills are discovered at startup...".to_string());
    
    for skill in skills {
        lines.push(format!(
            "- {}: {} (file: {})",
            skill.name, skill.description, skill.path.display()
        ));
    }
    
    // æ·»åŠ ä½¿ç”¨è¯´æ˜...
    Some(lines.join("\n"))
}
```

### 5.3 è¿è¡Œæ—¶æŠ€èƒ½æ³¨å…¥ (æ¯è½®å¯¹è¯)

```rust
// ä½ç½®: codex-rs/core/src/skills/injection.rs
pub async fn build_skill_injections(
    inputs: &[UserInput],
    skills: Option<&SkillLoadOutcome>,
) -> SkillInjections {
    // æ”¶é›†ç”¨æˆ·æ¶ˆæ¯ä¸­æåˆ°çš„æŠ€èƒ½
    let mentioned_skills = collect_explicit_skill_mentions(inputs, &outcome.skills);
    
    // è¯»å–è¢«æåŠæŠ€èƒ½çš„å®Œæ•´å†…å®¹
    for skill in mentioned_skills {
        let contents = fs::read_to_string(&skill.path).await?;
        result.items.push(ResponseItem::from(SkillInstructions {
            name: skill.name,
            path: skill.path.to_string_lossy().into_owned(),
            contents,  // å®Œæ•´çš„ SKILL.md å†…å®¹
        }));
    }
    
    result
}
```

## 6. ç”Ÿå‘½å‘¨æœŸæ€»ç»“

```
åº”ç”¨ç”Ÿå‘½å‘¨æœŸ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

å¯åŠ¨é˜¶æ®µ (ä¸€æ¬¡æ€§)
    â”‚
    â”œâ”€â”€ 1. è¯»å–é…ç½®
    â”œâ”€â”€ 2. æ£€æŸ¥ Feature::Skills æ˜¯å¦å¯ç”¨
    â”œâ”€â”€ 3. load_skills() - æ‰«æå¹¶è§£ææ‰€æœ‰ SKILL.md
    â”œâ”€â”€ 4. å­˜å‚¨ SkillLoadOutcome åˆ° Session
    â””â”€â”€ 5. æ¸²æŸ“ skills_section åˆ°ç³»ç»Ÿæç¤º

è¿è¡Œé˜¶æ®µ (æ¯è½®å¯¹è¯)
    â”‚
    â”œâ”€â”€ 1. ç”¨æˆ·å‘é€æ¶ˆæ¯
    â”œâ”€â”€ 2. æ£€æµ‹æ¶ˆæ¯ä¸­æ˜¯å¦æåŠ Skill (å¦‚ $SkillName æˆ–å…³é”®è¯åŒ¹é…)
    â”œâ”€â”€ 3. build_skill_injections() - è¯»å–è¢«æåŠ Skill çš„å®Œæ•´å†…å®¹
    â””â”€â”€ 4. å°† Skill å†…å®¹æ³¨å…¥åˆ°å½“å‰å¯¹è¯ä¸Šä¸‹æ–‡

ä¿®æ”¹ SKILL.md å
    â”‚
    â””â”€â”€ éœ€è¦é‡å¯åº”ç”¨æ‰èƒ½ç”Ÿæ•ˆ (æ— çƒ­åŠ è½½)
```

## 7. TUI ä¸­çš„é”™è¯¯å¤„ç†

å¦‚æœ Skills åŠ è½½æ—¶å‡ºç°é”™è¯¯ï¼ŒTUI ä¼šæ˜¾ç¤ºä¸€ä¸ªé˜»å¡å¼çš„é”™è¯¯æç¤ºï¼š

```rust
// ä½ç½®: codex-rs/tui/src/skill_error_prompt.rs
pub async fn run_skill_error_prompt(tui: &mut Tui, errors: &[SkillError]) -> SkillErrorPromptOutcome {
    // æ˜¾ç¤ºé”™è¯¯åˆ—è¡¨
    // ç”¨æˆ·å¯ä»¥é€‰æ‹©ï¼š
    //   - Enter/Esc: ç»§ç»­è¿è¡Œ (å¿½ç•¥é”™è¯¯çš„ Skills)
    //   - Ctrl+C/Ctrl+D: é€€å‡ºåº”ç”¨
}
```

## 8. SKILL.md æ–‡ä»¶æ ¼å¼

```markdown
---
name: skill-name-here
description: ä¸€è¡Œæè¿°è¿™ä¸ªæŠ€èƒ½åšä»€ä¹ˆä»¥åŠä½•æ—¶ä½¿ç”¨ (â‰¤500å­—ç¬¦)
---

# å¯é€‰çš„æ­£æ–‡å†…å®¹

è¿™é‡Œå¯ä»¥åŒ…å«è¯¦ç»†çš„è¯´æ˜ã€ç¤ºä¾‹ã€è„šæœ¬ç­‰ã€‚
æ­£æ–‡å†…å®¹åªåœ¨æŠ€èƒ½è¢«æ¿€æ´»æ—¶æ‰ä¼šè¢«è¯»å–ï¼Œä¸ä¼šæ³¨å…¥åˆ°åˆå§‹ä¸Šä¸‹æ–‡ä¸­ã€‚
```

## 9. ä¸ºä»€ä¹ˆä¸æ˜¯çƒ­åŠ è½½ï¼Ÿ

å½“å‰è®¾è®¡é€‰æ‹©å†·åŠ è½½è€Œéçƒ­åŠ è½½ï¼ŒåŸå› å¯èƒ½åŒ…æ‹¬ï¼š

1. **ç®€å•æ€§** - å†·åŠ è½½å®ç°æ›´ç®€å•ï¼Œä¸éœ€è¦æ–‡ä»¶ç›‘å¬å’ŒçŠ¶æ€åŒæ­¥
2. **ä¸€è‡´æ€§** - ä¼šè¯æœŸé—´ Skills åˆ—è¡¨ä¿æŒä¸å˜ï¼Œé¿å…è¿è¡Œæ—¶æ„å¤–å˜åŒ–
3. **æ€§èƒ½** - æ— éœ€è¿è¡Œæ—¶æ–‡ä»¶ç³»ç»Ÿç›‘å¬
4. **å®‰å…¨æ€§** - ç”¨æˆ·æ˜ç¡®çŸ¥é“ä½•æ—¶æ›´æ”¹ç”Ÿæ•ˆ

å¦‚æœéœ€è¦çƒ­åŠ è½½åŠŸèƒ½ï¼Œå¯ä»¥è€ƒè™‘ï¼š
- æ·»åŠ  `/reload-skills` æ–œæ å‘½ä»¤
- ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿ watcherï¼ˆå¦‚ `notify` crateï¼‰
- åœ¨ `Session` ä¸­æ·»åŠ åˆ·æ–°æœºåˆ¶

## 10. ç›¸å…³æ–‡ä»¶ç´¢å¼•

| æ–‡ä»¶è·¯å¾„ | èŒè´£ |
|---------|------|
| `codex-rs/core/src/skills/mod.rs` | Skills æ¨¡å—å…¥å£å’Œå¯¼å‡º |
| `codex-rs/core/src/skills/loader.rs` | Skills åŠ è½½å’Œè§£æé€»è¾‘ |
| `codex-rs/core/src/skills/model.rs` | æ•°æ®ç»“æ„å®šä¹‰ |
| `codex-rs/core/src/skills/render.rs` | æ¸²æŸ“ Skills åˆ°ç³»ç»Ÿæç¤º |
| `codex-rs/core/src/skills/injection.rs` | è¿è¡Œæ—¶ Skill å†…å®¹æ³¨å…¥ |
| `codex-rs/core/src/codex.rs` | Session åˆå§‹åŒ–ï¼Œè°ƒç”¨ load_skills |
| `codex-rs/core/src/project_doc.rs` | åˆå¹¶ Skills åˆ°ç”¨æˆ·æŒ‡ä»¤ |
| `codex-rs/core/src/features.rs` | Feature::Skills å®šä¹‰ |
| `codex-rs/tui/src/skill_error_prompt.rs` | TUI é”™è¯¯æ˜¾ç¤º |
| `docs/skills.md` | ç”¨æˆ·æ–‡æ¡£ |
